/**
 * frontend.js
 *
 * @author Your Inspiration Themes
 * @package YITH WooCommerce Frequently Bought Together Premium
 * @version 1.0.0
 */

jQuery(document).ready(function(a){"use strict";var b=a(".yith-wfbt-items"),c=b.find("input"),d=a(".yith-wfbt-submit-block").find(".total_price"),e=d.find(".amount"),f=parseFloat(d.data("total")),h=(a(".yith-wfbt-images"),function(a){var b="";return"left"===yith_wfbt.currency_pos?b=yith_wfbt.currency_symbol+a.toFixed(2):"left_space"===yith_wfbt.currency_pos?b=yith_wfbt.currency_symbol+" "+a.toFixed(2):"right"===yith_wfbt.currency_pos?b=a.toFixed(2)+yith_wfbt.currency_symbol:"right_space"===yith_wfbt.currency_pos&&(b=a.toFixed(2)+" "+yith_wfbt.currency_symbol),b});c.on("change",function(){var c=a(this),d=b.find("input:checked"),f=a(this).attr("id"),g=a('.yith-wfbt-images td.image-td[data-rel="'+f+'"]'),i=0,j=[];c.parents("li").toggleClass("is_not_checked"),d.each(function(b){j[b]=this.id,i+=parseFloat(a(this).data("price"))}),g.fadeToggle(),1==j.length?a("td.image_plus").fadeOut():j.length==a("td.image-td").length?a("td.image_plus").fadeIn():j[0]==f||j[0]==g.next("td.image_plus").data("rel")?g.next("td.image_plus").fadeToggle():g.prev("td.image_plus").fadeToggle(),e.html(h(i));var k=d.length,l=a(".yith-wfbt-submit-block"),m="",n="";0==k?l.hide():(l.show(),1==k?(m=yith_wfbt.label_single,n=yith_wfbt.total_single):2==k?(m=yith_wfbt.label_double,n=yith_wfbt.total_double):3==k?(m=yith_wfbt.label_three,n=yith_wfbt.total_three):(m=yith_wfbt.label_multi,n=yith_wfbt.total_multi),l.find("span.total_price_label").html(n),l.find("input").val(m))});var i=a("form.variations_form.cart").find(".single_variation_wrap"),j=a("form.yith-wfbt-form");i.on("show_variation",function(b,c){if(c.is_in_stock){var d=c.display_price,g=c.price_html,k=(c.attributes,a(".yith-wfbt-items").find('label[for="offeringID_0"]')),l=k.find('input[type="checkbox"]');c.variation_id!=l.val()&&(j.block({message:null,overlayCSS:{background:"#fff url("+yith_wfbt.loader+") no-repeat center",opacity:.6}}),a.ajax({type:"POST",url:yith_wfbt.ajaxurl,data:{action:"yith_update_variation_product",product_id:c.variation_id,context:"frontend"},dataType:"json",success:function(b){if(a(".yith-wfbt-images").find('td[data-rel="offeringID_0"]').html(b.image),""!=g){var i=parseFloat(l.data("price"));k.find("span.price").replaceWith(g),l.data("price",parseFloat(d)),l.is(":checked")&&(f=f-i+d,e.html(h(f)))}k.find("span.product-attributes").html(b.attributes),l.val(c.variation_id),j.unblock()}}))}});var k=a(document).find(".yith-wfbt-products-list"),l=k.next(".yith-wfbt-slider-nav");k.length&&(k.owlCarousel({items:yith_wfbt.visible_elem,loop:!0,dots:!1}),l.length&&(l.find(".yith-wfbt-nav-prev").click(function(){k.trigger("prev.owl.carousel")}),l.find(".yith-wfbt-nav-next").click(function(){k.trigger("next.owl.carousel")})))});