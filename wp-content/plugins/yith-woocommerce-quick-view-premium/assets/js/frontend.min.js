/**
 * frontend.min.js
 *
 * @author Your Inspiration Themes
 * @package YITH WooCommerce Quick View
 * @version 1.0.0
 */
jQuery(document).ready(function(a){"use strict";var b="",c="",d="",e="",f="",g=[],h=function(){var b=a(document).find(".yith-quick-view .yith-wcqv-wrapper"),c=a(window).width(),d=a(window).height(),e=c-60>yith_qv.popup_size_width?yith_qv.popup_size_width:c-60,f=d-120>yith_qv.popup_size_height?yith_qv.popup_size_height:d-120;b.css({left:c/2-e/2,top:d/2-f/2,width:e+"px",height:f+"px"})};if("undefined"!=typeof yith_qv){a.fn.yith_wcqv_init=function(){b=a(document).find(".yith-wcqv-button"),c="yith-inline"!=yith_qv.type?a(document).find(".yith-quick-view"):a(document).find(".yith-quick-view").clone(),d=c.find(".yith-quick-view-content"),e=c.find(".yith-quick-view-close"),f=c.find(".yith-quick-view-nav"),a.each(b,function(){var b=a(this).data("product_id");a.inArray(b,g)==-1&&g.push(b)}),f.length&&k(f),o(e),"yith-inline"!=yith_qv.type&&(h(),a(window).on("resize",h)),b.off("click"),b.hasClass("inside-thumb")&&imagesLoaded(d,function(){i(b)}),a(document).on("click",".yith-wcqv-button",function(b){var e=a(this),g=(e.data("type"),e.data("product_id"));if(g){if(b.preventDefault(),yith_qv.enable_loading||j(e),"yith-inline"==yith_qv.type){var h=e.parents(yith_qv.main_product),i=h.hasClass("last")?h:h.nextUntil(".first",".last");if(i.length||(i=e.closest(".products").find(yith_qv.main_product).last()),i.next(".yith-quick-view").length)j(d);else{if(c.hasClass("open"))return c.removeClass("open").removeClass("loading"),void c.slideUp("slow",function(){i.after(c),l(e,g)});i.after(c)}}else a(document).trigger("qv_loading");l(e,g)}})};var i=function(b){var c=a(document).find("img.attachment-shop_catalog").height(),d=b.height();b.css({top:(c-d)/2+"px"})},j=function(b){"undefined"!=typeof yith_qv.loader&&(b.find("span, img").block({message:null,overlayCSS:{background:"#fff url("+yith_qv.loader+") no-repeat center",opacity:.5,cursor:"none"}}),a(document).on("qv_loader_stop",function(){b.find("span, img").unblock()}))},k=function(b){var c=b.find("> a");c.off("click"),c.on("click",function(b){b.preventDefault();var c=a(this),e=c.data("product_id");j(d),l(c,e)})},l=function(b,e){var h=a.inArray(e,g),i=g[h-1],j=g[h+1],k={action:"yith_load_product_quick_view",product_id:e,prev_product_id:i,next_product_id:j,context:"frontend"};a.ajax({url:yith_qv.ajaxurl,data:k,dataType:"json",type:"POST",success:function(b){d.html(b.html),"slider"==b.images_type?imagesLoaded(d,function(){m()}):n(),d.find("div.summary").perfectScrollbar({suppressScrollX:!0}),(yith_qv.is2_2||yith_qv.increment_plugin)&&d.find("div.quantity:not(.buttons_added), td.quantity:not(.buttons_added)").addClass("buttons_added").append('<input type="button" value="+" class="plus" />').prepend('<input type="button" value="-" class="minus" />');var e=d.find(".variations_form");e.wc_variation_form(),e.trigger("check_variations"),e.trigger("reset_image"),"undefined"!=typeof a.fn.yith_wccl?e.yith_wccl():"undefined"!=typeof a.yith_wccl&&b.prod_attr&&a.yith_wccl(b.prod_attr),"undefined"!=typeof a.fn.yith_ywraq_variations&&(a.fn.yith_ywraq_variations(),d.find('[name|="variation_id"]').trigger("change"));var g=d.find(".yith-wocc-wrapper");g.length&&"undefined"!=typeof a.fn.yith_wocc_init&&g.yith_wocc_init(),"undefined"!=typeof a.fn.prettyPhoto&&d.find("a[data-rel^='prettyPhoto']").prettyPhoto({hook:"data-rel",social_tools:!1,theme:"pp_woocommerce",horizontal_padding:20,opacity:.8,deeplinking:!1}),yith_qv.ajaxcart&&p(b.product_link,d);var h=e.find(".single_variation_wrap");if(q(h),"undefined"!=typeof a.fn.ajaxForm&&"undefined"!=typeof a.fn.wpcf7InitForm&&(a.fn.ajaxForm({delegation:!0,target:"#output"}),d.find("div.wpcf7 > form").wpcf7InitForm()),f.length){var i=f.find(".yith-wcqv-next"),j=f.find(".yith-wcqv-prev");b.prev_product?(j.find("div").html(b.prev_product_preview),j.data("product_id",b.prev_product).css({display:"block"})):j.css({display:"none"}),b.next_product?(i.find("div").html(b.next_product_preview),i.data("product_id",b.next_product).css({display:"block"})):i.css({display:"none"})}c.hasClass("open")||(c.removeClass("loading").addClass("open"),"yith-inline"==yith_qv.type?c.slideDown("slow"):a("html").addClass("yith-quick-view-is-open")),a(document).trigger("qv_loader_stop")}})},m=function(){var a=d.find(".yith-quick-view-images-slider"),b=a.find(".yith-quick-view-slides");b.owlCarousel({items:1,dots:!1}),a.on("click",".es-nav-next",function(){b.trigger("next.owl.carousel")}),a.on("click",".es-nav-prev",function(){b.trigger("prev.owl.carousel")})},n=function(){a(".yith-quick-view-single-thumb").on("click",function(){a(this).siblings().removeClass("active");var b=a(this).parents(".images"),c=b.find(".woocommerce-main-image"),d=b.find("img.wp-post-image"),e=a(this).data("img"),f=a(this).data("href");d.length||(d=b.find("img.attachment-quick_view_image_size"),c=d.closest("a")),d.attr("src",e).attr("srcset",e).attr("src-orig",e),c.attr("href",f),a(this).addClass("active"),a(document).trigger("yith_wcqv_change_thumb")})},o=function(b){b.off("click"),b.on("click",function(a){a.preventDefault(),e()}),"yith-inline"!=yith_qv.type&&(a(document).keyup(function(a){27===a.keyCode&&e()}),a(".yith-quick-view-overlay").on("click",function(a){c.hasClass("loading")||e()}));var e=function(){c.removeClass("open").removeClass("loading"),"yith-inline"!=yith_qv.type?(a("html").removeClass("yith-quick-view-is-open"),setTimeout(function(){f()},1e3)):c.slideUp("slow",function(){f()})},f=function(){d.html(""),a(document).trigger("qv_is_closed")}};a(document).on("yith_infs_adding_elem yith-wcan-ajax-filtered",function(){a.fn.yith_wcqv_init()});var p=function(b,c){c.find("form.cart").on("submit",function(d){d.preventDefault();var e=a(this),f=e.find("button");"undefined"!=typeof yith_qv.loader&&f.block({message:null,overlayCSS:{background:"#fff url("+yith_qv.loader+") no-repeat center",opacity:.5,cursor:"none"}}),a.post(b,e.serialize()+"&_wp_http_referer="+b,function(b){if(yith_qv.redirect_checkout)return void(window.location.href=yith_qv.checkout_url);var d=a(b).find("div.woocommerce-message"),e=a(b).find("#header .yit_cart_widget"),g=c.find("div.summary");if(d.length||(d=a(b).find("ul.woocommerce-error")),a("#header").find(".yit_cart_widget").replaceWith(e),"undefined"!=typeof wc_cart_fragments_params){var h;try{h="sessionStorage"in window&&null!==window.sessionStorage,window.sessionStorage.setItem("wc","test"),window.sessionStorage.removeItem("wc")}catch(a){h=!1}a.ajax({url:wc_cart_fragments_params.wc_ajax_url.toString().replace("%%endpoint%%","get_refreshed_fragments"),type:"POST",success:function(b){b&&b.fragments&&(a.each(b.fragments,function(b,c){a(b).replaceWith(c)}),h&&(sessionStorage.setItem(wc_cart_fragments_params.fragment_name,JSON.stringify(b.fragments)),sessionStorage.setItem("wc_cart_hash",b.cart_hash)),a(document.body).trigger("wc_fragments_refreshed"))}})}g.find(".woocommerce-message, .woocommerce-error").remove(),g.prepend(d),"undefined"!=typeof yith_qv.loader&&f.unblock(),a("body").trigger("added_to_cart")})})},q=function(b){b.on("show_variation",function(b,c){if("undefined"!=typeof c.attachment_id){var d=a(".yith-quick-view-thumbs"),e=d.find(".yith-quick-view-single-thumb"),f=d.find('.yith-quick-view-single-thumb[data-attachment_id="'+c.attachment_id+'"]');e.removeClass("active"),f.length&&f.addClass("active")}})};a(document).on("qv_loading",function(){if(!yith_qv.enable_loading)return!1;var b=a(document).find(".yith-quick-view"),c=b.find(".yith-quick-view-overlay");if(b.hasClass("loading")||b.addClass("loading"),!c.find("p").length){var d=a("<p />").text(yith_qv.loading_text);c.append(d)}}),yith_qv.enable_zoom&&"undefined"!=typeof a.fn.yith_magnifier&&a(document).on("qv_loader_stop",function(b){if("undefined"==typeof yith_magnifier_options)return!1;var c=a(".yith-quick-view-content .images"),d=c.find(".yith_magnifier_zoom"),e=c.find(".yith_magnifier_zoom img.attachment-quick_view_image_size"),f=c.find(".yith_magnifier_zoom").attr("href"),g=c.find(".yith_magnifier_zoom img").attr("src");d.attr("href",f),e.attr("src",g),e.attr("srcset",g),e.attr("src-orig",g),c.data("yith_magnifier")&&c.yith_magnifier("destroy");var h={enableSlider:!1,position:"inside",elements:{zoom:d,zoomImage:e}};h=a.extend(!0,{},yith_magnifier_options,h),a(document).off("click","a.pp_expand"),c.yith_magnifier(h),a(document).off("yith_wcqv_change_thumb").on("yith_wcqv_change_thumb",function(){c.yith_magnifier("destroy"),c.yith_magnifier(h)})}),a(document).on("qv_loader_stop",function(){"yith-inline"==yith_qv.type&&a("html, body").animate({scrollTop:a(".yith-quick-view").offset().top-100},1e3)}),a.fn.YitdoubleTapToGo=function(){return this.each(function(){var b=!1,c=a(this).closest(".product");a(document).on("qv_loader_stop",function(){c.removeClass("hover_mobile")}),a(this).on("touchstart",function(a){c.siblings().removeClass("hover_mobile"),b&&c.hasClass("hover_mobile")||(a.preventDefault(),c.addClass("hover_mobile"),b=!0)})}),this},yith_qv.ismobile&&a(yith_qv.main_product_link).YitdoubleTapToGo(),a.fn.yith_wcqv_init(),a(document).on("yith_wcqv_wcajaxnav_update",a.fn.yith_wcqv_init)}});